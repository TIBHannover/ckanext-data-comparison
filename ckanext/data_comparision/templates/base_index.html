{% extends "package/resource_read.html" %}


{% block pre_primary %}
    {% asset 'ckanext-data-comparision/page-css' %}
    {% asset 'ckanext-data-comparision/page-js' %}
    {% set action_process = h.url_for('data_comparision.process_columns', _external=True) %}
    <input type="hidden" id="process_url" value="{{action_process}}">
     <section class="data-comparision-module">
       
        <table class="data-comp-table">
            <tr class="dcom-table-header-row">
              {% for col in h.get_columns(pkg_dict['id'], resource['id'], 'csv') %}
                <th class="dcom-table-cell dcom-table-header-cell {{'dcom-column-' ~ loop.index}}" name="{{'dcom-column-name-' ~ loop.index}}">
                  {{col}}
                </th>
                <input 
                  type="checkbox" 
                  value="{{resource['id'] ~ '@_@' ~ col}}" 
                  name="chosen_columns" 
                  class="hidden-checkbox"
                  id="{{'col-checkbox-'  ~ loop.index}}"
                >
              {% endfor %}
            </tr>
            {% for row in h.get_data(pkg_dict['id'], resource['id'], 'csv') %}
                <tr class="dcom-table-content-row">
                  {% for value in row %}
                    <td class="dcom-table-cell {{'dcom-column-' ~ loop.index}}" name="{{'dcom-column-name-' ~ loop.index}}">{{value}}</td>
                  {% endfor %}
                </tr>
            {% endfor %}
        </table>
        <div class="row">
            {% snippet 'snippets/data_comparision_browes.html', 
              datasets=datasets
            %}
        </div>    
     </section>
      <div class="row">
          <div class="col-sm-12">
            <button class="btn btn-primary" type="button" id="process_btn">{{_('Process data')}}</button>
          </div>
      </div>



{% endblock pre_primary %}

{% block primary %}{% endblock %}
{% block secondary %}{% endblock  %}